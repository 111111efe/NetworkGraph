function getTranslateAndScaleAndRotate(t){var a=d3.select(t).attr("transform");var e=a&&/translate/.test(a)&&/scale/.test(a)&&a.match(/translate\(([^\)]+)\)\s?scale\(([^\)]+)/);var o=e&&e[1].split(",")||[0,0];var n=e&&e[2]||1;var r=a&&/rotate/.test(a)&&a.match(/\s?rotate\(([^\)]+)/);var c=r&&r[1]||0;var l=o[0];var s=o[1];return{x:l,y:s,k:n,rotate:c}}var zoom=d3.zoom().on("zoom",function(){var t=getTranslateAndScaleAndRotate("#network-graph");d3.event.transform["rotate"]=t.rotate;zoomFunction(d3.event.transform)});container.call(zoom).on("dblclick.zoom",null);function zoomFunction(t){console.log("translate("+t.x+","+t.y+") "+"scale("+t.k+") "+"rotate("+t.rotate+","+window.innerWidth/2+" "+window.innerHeight/2+")");network_graph.attr("transform","translate("+t.x+","+t.y+") "+"scale("+t.k+") "+"rotate("+t.rotate+")");brush_svg.attr("transform","translate("+t.x+","+t.y+") "+"scale("+t.k+") "+"rotate("+t.rotate+")");brush_svg.select("rect").attr("x",-t.x/t.k).attr("y",-t.y/t.k).attr("width",window.innerWidth/t.k).attr("height",window.innerHeight/t.k)}d3.select("#zoom-out").on("click",function(){var t=getTranslateAndScaleAndRotate("#network-graph");t.k=parseFloat(t.k)*1.5+"";zoomFunction(t)});d3.select("#zoom-in").on("click",function(){var t=getTranslateAndScaleAndRotate("#network-graph");t.k=parseFloat(t.k)/1.5+"";zoomFunction(t)});d3.select("#zoom-reset").on("click",function(){var t=getTranslateAndScaleAndRotate("#network-graph");t.k="1";zoomFunction(t)});d3.select("#rotate").on("click",function(){var t=getTranslateAndScaleAndRotate("#network-graph");t.rotate=parseInt(t.rotate)+10+"";zoomFunction(t)});d3.select("#rerotate").on("click",function(){var t=getTranslateAndScaleAndRotate("#network-graph");t.rotate=parseInt(t.rotate)-10+"";zoomFunction(t)});