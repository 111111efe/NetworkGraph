var bar_config={width:400,height:300,top:20,bottom:70,left:20,right:20};function drawBarChart(t){var a=d3.select("#bargraph").attr("width",bar_config.width).attr("height",bar_config.height).attr("transform","translate("+(width-bar_config.width+2)+", "+32+")");var r=translate_to_bardata(t);var n=[];r.forEach(function(t){n.push(t.label)});var e=d3.scaleBand().domain(n).range([0,bar_config.width-bar_config.left-bar_config.right]);var o=d3.axisBottom(e);var i=d3.scaleLinear().domain([0,r[0].data]).range([bar_config.height-bar_config.top-bar_config.bottom,0]);var c=d3.axisLeft(i);var f=d3.scaleOrdinal(d3.schemeCategory10);var l=(bar_config.width-bar_config.left-bar_config.right)/r.length;var g=l*.3;a.selectAll("*").remove();a.append("g").attr("id","text-rotate").attr("transform","translate("+bar_config.left+", "+(bar_config.height-bar_config.bottom)+")").call(o);a.append("g").attr("transform","translate("+bar_config.left+", "+bar_config.top+")").call(c);var d=a.append("g").selectAll(".rect").data(r).enter().append("rect").attr("x",function(t,a){return a*l+bar_config.left+g/2}).attr("y",function(t){return i(t.data)+bar_config.top}).attr("width",function(){return l-g}).attr("height",function(t){return 0}).attr("fill",function(t,a){return f(a)}).on("click",function(t){find_node_label(t.label);d3.event.stopPropagation()});d.transition().delay(function(t,a){return a*150}).duration(1500).ease(d3.easeCubicOut).attr("height",function(t){return bar_config.height-bar_config.top-bar_config.bottom-i(t.data)});a.selectAll("#text-rotate text").style("text-anchor","end").style("font-size","13px").attr("transform",function(t,a){return"rotate(-45)"})}function translate_to_bardata(t){var a={};t.nodes.forEach(function(t){if(isNaN(a[t.label])){a[t.label]=1}else{a[t.label]+=1}});var r=[];for(var n in a){r.push({label:n,data:a[n]})}r=r.sort(function(t,a){return a.data-t.data});return r}